#include <assert.h>
#include <stdio.h>

static inline void *get_kernel_data_address(void) {
    FILE *address_file = fopen("/sys/kernel/kernel_data/address", "r");
    assert(address_file != NULL);

    size_t address;
    int scanned = fscanf(address_file, "%zx\n", &address);
    assert(scanned == 1);
    fclose(address_file);
    return (void *) address;
}
